<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StudyTrack</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/dark.css">
  
  <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

  <style>
    /* Add a style for the active nav link */
    .nav-link.active {
      background-color: #0f1724; /* card bg */
      color: #38bdf8; /* cyan-400 */
    }
  </style>
</head>
<body class="min-h-screen p-4 md:p-6">
  
  <div class="max-w-5xl mx-auto">
    <nav class="card p-2 rounded-lg shadow-sm mb-6">
      <div class="flex flex-col md:flex-row justify-between space-y-2 md:space-y-0 md:space-x-2">
        
        <a href="/" id="nav-dashboard" class="nav-link flex-1 px-4 py-3 rounded-md text-center font-medium muted hover:bg-gray-900 transition-colors">
          <i data-feather="home" class="inline-block w-5 h-5 md:mr-2"></i>
          <span class="hidden md:inline">Dashboard</span>
        </a>
        <a href="/timers" id="nav-timers" class="nav-link flex-1 px-4 py-3 rounded-md text-center font-medium muted hover:bg-gray-900 transition-colors">
          <i data-feather="clock" class="inline-block w-5 h-5 md:mr-2"></i>
          <span class="hidden md:inline">Timers</span>
        </a>
        <a href="/history" id="nav-history" class="nav-link flex-1 px-4 py-3 rounded-md text-center font-medium muted hover:bg-gray-900 transition-colors">
          <i data-feather="archive" class="inline-block w-5 h-5 md:mr-2"></i>
          <span class="hidden md:inline">Session History</span>
        </a>
        <a href="/analytics" id="nav-analytics" class="nav-link flex-1 px-4 py-3 rounded-md text-center font-medium muted hover:bg-gray-900 transition-colors">
          <i data-feather="bar-chart-2" class="inline-block w-5 h-5 md:mr-2"></i>
          <span class="hidden md:inline">Analytics</span>
        </a>

      </div>
    </nav>
    <main>
      {% block content %}{% endblock %}
    </main>

  </div>

  <script>
    // Run Feather Icons
    feather.replace();
    
    // --- Set the 'active' link in the nav ---
    // This script will run on every page
    const pageId = "nav-{{ page_id or 'dashboard' }}";
    const activeLink = document.getElementById(pageId);
    if (activeLink) {
      activeLink.classList.add('active');
    }
    // ----------------------------------------
  </script>

</body>
</html>